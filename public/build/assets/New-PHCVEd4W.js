import{r as i,a as le,j as e,R as T,K as ce,k as V,$ as Ct}from"./app-CW2wVgSQ.js";import{c as wt,u as P,e as C,f as de,B as R,g as Rt,S as At,b as J,a as St}from"./AuthenticatedLayout-D35cYHGr.js";import{L as A}from"./label-oRbyoOWi.js";import{c as M,u as Q,P as ue,a as S,I as w,b as Dt}from"./input-YPxtpf5a.js";import{b as pe,c as fe,d as me,f as ge,g as xe,T as Et,O as _t,W as Tt,C as It,h as Pt,i as kt,j as he,P as Ft,R as Ot,D as oe,k as ne,a as ie}from"./dialog-DgPP0oFr.js";import{u as Mt}from"./index-BLNK7vmU.js";import{u as Vt}from"./index-CvQAXmwg.js";import{S as B,a as K,b as H,c as U,d as O}from"./select-C_elCJ2h.js";import{u as ve}from"./Combination-Cfj37FY_.js";import"./index-CaM0zfBP.js";import{u as be}from"./index-j6qOteaR.js";import{P as $t}from"./index-TZdzqAYH.js";import{T as Lt}from"./trash-De3rTpld.js";import{D as qt}from"./DashboardLayout-DLZGk48D.js";import{M as Gt}from"./move-left-BAUMJGWM.js";import"./transition-CrovLz_c.js";import"./x-G_1Zej-e.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Bt=wt("Pencil",zt),Kt=()=>{const[t,s]=i.useState(!1),[a,o]=i.useState(!1),[r,l]=i.useState(""),[d,m]=i.useState([]);return{getFieldTypes:async()=>{var f;try{s(!0);const g=await le.get("/field-types/list");m((f=g.data)==null?void 0:f.data)}catch(g){o(!0),l(g.message||"An error occurred")}finally{s(!1)}},isLoading:t,isError:a,error:r,fieldTypes:d}};var ee="Switch",[Ht,ea]=M(ee),[Ut,Wt]=Ht(ee),je=i.forwardRef((t,s)=>{const{__scopeSwitch:a,name:o,checked:r,defaultChecked:l,required:d,disabled:m,value:p="on",onCheckedChange:f,form:g,...n}=t,[c,b]=i.useState(null),u=P(s,y=>b(y)),x=i.useRef(!1),j=c?g||!!c.closest("form"):!0,[h=!1,v]=Q({prop:r,defaultProp:l,onChange:f});return e.jsxs(Ut,{scope:a,checked:h,disabled:m,children:[e.jsx(ue.button,{type:"button",role:"switch","aria-checked":h,"aria-required":d,"data-state":Ce(h),"data-disabled":m?"":void 0,disabled:m,value:p,...n,ref:u,onClick:S(t.onClick,y=>{v(E=>!E),j&&(x.current=y.isPropagationStopped(),x.current||y.stopPropagation())})}),j&&e.jsx(Yt,{control:c,bubbles:!x.current,name:o,value:p,checked:h,required:d,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});je.displayName=ee;var ye="SwitchThumb",Ne=i.forwardRef((t,s)=>{const{__scopeSwitch:a,...o}=t,r=Wt(ye,a);return e.jsx(ue.span,{"data-state":Ce(r.checked),"data-disabled":r.disabled?"":void 0,...o,ref:s})});Ne.displayName=ye;var Yt=t=>{const{control:s,checked:a,bubbles:o=!0,...r}=t,l=i.useRef(null),d=Mt(a),m=Vt(s);return i.useEffect(()=>{const p=l.current,f=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(f,"checked").set;if(d!==a&&n){const c=new Event("click",{bubbles:o});n.call(p,a),p.dispatchEvent(c)}},[d,a,o]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...r,tabIndex:-1,ref:l,style:{...t.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ce(t){return t?"checked":"unchecked"}var we=je,Xt=Ne;const $=i.forwardRef(({className:t,...s},a)=>e.jsx(we,{className:C("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:a,children:e.jsx(Xt,{className:C("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));$.displayName=we.displayName;const Zt=({newField:t,setNewField:s,handleAddField:a,fieldTypes:o})=>{var d,m;const r=o.find(p=>p.id===t.type_id),l=((d=r==null?void 0:r.name)==null?void 0:d.toLowerCase())||"";return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{children:[e.jsx(fe,{children:"Add New Field"}),e.jsx(me,{children:"Please enter the name for the new field."})]}),e.jsxs("div",{className:"space-y-4 mt-5",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Name"}),e.jsx(w,{placeholder:"Enter Field Name",value:t.title,onChange:p=>s(f=>({...f,title:p.target.value,slug:de(p.target.value)}))})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Type"}),e.jsxs(B,{value:String(t.type_id),onValueChange:p=>s(f=>({...f,type_id:Number(p)})),children:[e.jsx(K,{children:e.jsx(H,{placeholder:"Select Type"})}),e.jsx(U,{children:o==null?void 0:o.map(p=>e.jsx(O,{value:String(p.id),children:p.name},p.id))})]})]}),l==="dropdown"&&e.jsxs("div",{children:[e.jsx(A,{children:"Dropdown Options"}),e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border rounded-lg p-2 space-y-2",children:(m=t.options)==null?void 0:m.map((p,f)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{placeholder:`Option ${f+1}`,value:p,onChange:g=>{const n=[...t.options];n[f]=g.target.value,s(c=>({...c,options:n}))}}),e.jsx(R,{type:"button",variant:"destructive",size:"sm",onClick:()=>{const g=t.options.filter((n,c)=>c!==f);s(n=>({...n,options:g}))},children:"Remove"})]},f))}),e.jsx(R,{type:"button",variant:"secondary",className:"mt-3 w-full",onClick:()=>s(p=>({...p,options:[...p.options||[],""]})),children:"+ Add Option"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:"is-required",checked:t.isRequired,onCheckedChange:p=>s(f=>({...f,isRequired:p}))}),e.jsx(A,{htmlFor:"is-required",children:"Is Required"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[e.jsx(ge,{asChild:!0,children:e.jsx(R,{type:"button",variant:"outline",children:"Close"})}),e.jsx(R,{onClick:a,disabled:!t.title||t.type_id===null,children:"Add Field"})]})]})};var L=i.forwardRef((t,s)=>{const{children:a,...o}=t,r=i.Children.toArray(a),l=r.find(Qt);if(l){const d=l.props.children,m=r.map(p=>p===l?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:p);return e.jsx(W,{...o,ref:s,children:i.isValidElement(d)?i.cloneElement(d,void 0,m):null})}return e.jsx(W,{...o,ref:s,children:a})});L.displayName="Slot";var W=i.forwardRef((t,s)=>{const{children:a,...o}=t;if(i.isValidElement(a)){const r=ts(a),l=es(o,a.props);return a.type!==i.Fragment&&(l.ref=s?Rt(s,r):r),i.cloneElement(a,l)}return i.Children.count(a)>1?i.Children.only(null):null});W.displayName="SlotClone";var Jt=({children:t})=>e.jsx(e.Fragment,{children:t});function Qt(t){return i.isValidElement(t)&&t.type===Jt}function es(t,s){const a={...s};for(const o in s){const r=t[o],l=s[o];/^on[A-Z]/.test(o)?r&&l?a[o]=(...m)=>{l(...m),r(...m)}:r&&(a[o]=r):o==="style"?a[o]={...r,...l}:o==="className"&&(a[o]=[r,l].filter(Boolean).join(" "))}return{...t,...a}}function ts(t){var o,r;let s=(o=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:o.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}function ss(t){const s=t+"CollectionProvider",[a,o]=M(s),[r,l]=a(s,{collectionRef:{current:null},itemMap:new Map}),d=b=>{const{scope:u,children:x}=b,j=T.useRef(null),h=T.useRef(new Map).current;return e.jsx(r,{scope:u,itemMap:h,collectionRef:j,children:x})};d.displayName=s;const m=t+"CollectionSlot",p=T.forwardRef((b,u)=>{const{scope:x,children:j}=b,h=l(m,x),v=P(u,h.collectionRef);return e.jsx(L,{ref:v,children:j})});p.displayName=m;const f=t+"CollectionItemSlot",g="data-radix-collection-item",n=T.forwardRef((b,u)=>{const{scope:x,children:j,...h}=b,v=T.useRef(null),y=P(u,v),E=l(f,x);return T.useEffect(()=>(E.itemMap.set(v,{ref:v,...h}),()=>void E.itemMap.delete(v))),e.jsx(L,{[g]:"",ref:y,children:j})});n.displayName=f;function c(b){const u=l(t+"CollectionConsumer",b);return T.useCallback(()=>{const j=u.collectionRef.current;if(!j)return[];const h=Array.from(j.querySelectorAll(`[${g}]`));return Array.from(u.itemMap.values()).sort((E,F)=>h.indexOf(E.ref.current)-h.indexOf(F.ref.current))},[u.collectionRef,u.itemMap])}return[{Provider:d,Slot:p,ItemSlot:n},c,o]}var as=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],k=as.reduce((t,s)=>{const a=i.forwardRef((o,r)=>{const{asChild:l,...d}=o,m=l?L:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(m,{...d,ref:r})});return a.displayName=`Primitive.${s}`,{...t,[s]:a}},{}),z="rovingFocusGroup.onEntryFocus",rs={bubbles:!1,cancelable:!0},q="RovingFocusGroup",[Y,Re,os]=ss(q),[ns,Ae]=M(q,[os]),[is,ls]=ns(q),Se=i.forwardRef((t,s)=>e.jsx(Y.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Y.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(cs,{...t,ref:s})})}));Se.displayName=q;var cs=i.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,orientation:o,loop:r=!1,dir:l,currentTabStopId:d,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:p,onEntryFocus:f,preventScrollOnEntryFocus:g=!1,...n}=t,c=i.useRef(null),b=P(s,c),u=be(l),[x=null,j]=Q({prop:d,defaultProp:m,onChange:p}),[h,v]=i.useState(!1),y=Dt(f),E=Re(a),F=i.useRef(!1),[vt,ae]=i.useState(0);return i.useEffect(()=>{const N=c.current;if(N)return N.addEventListener(z,y),()=>N.removeEventListener(z,y)},[y]),e.jsx(is,{scope:a,orientation:o,dir:u,loop:r,currentTabStopId:x,onItemFocus:i.useCallback(N=>j(N),[j]),onItemShiftTab:i.useCallback(()=>v(!0),[]),onFocusableItemAdd:i.useCallback(()=>ae(N=>N+1),[]),onFocusableItemRemove:i.useCallback(()=>ae(N=>N-1),[]),children:e.jsx(k.div,{tabIndex:h||vt===0?-1:0,"data-orientation":o,...n,ref:b,style:{outline:"none",...t.style},onMouseDown:S(t.onMouseDown,()=>{F.current=!0}),onFocus:S(t.onFocus,N=>{const bt=!F.current;if(N.target===N.currentTarget&&bt&&!h){const re=new CustomEvent(z,rs);if(N.currentTarget.dispatchEvent(re),!re.defaultPrevented){const G=E().filter(_=>_.focusable),jt=G.find(_=>_.active),yt=G.find(_=>_.id===x),Nt=[jt,yt,...G].filter(Boolean).map(_=>_.ref.current);_e(Nt,g)}}F.current=!1}),onBlur:S(t.onBlur,()=>v(!1))})})}),De="RovingFocusGroupItem",Ee=i.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,focusable:o=!0,active:r=!1,tabStopId:l,...d}=t,m=ve(),p=l||m,f=ls(De,a),g=f.currentTabStopId===p,n=Re(a),{onFocusableItemAdd:c,onFocusableItemRemove:b}=f;return i.useEffect(()=>{if(o)return c(),()=>b()},[o,c,b]),e.jsx(Y.ItemSlot,{scope:a,id:p,focusable:o,active:r,children:e.jsx(k.span,{tabIndex:g?0:-1,"data-orientation":f.orientation,...d,ref:s,onMouseDown:S(t.onMouseDown,u=>{o?f.onItemFocus(p):u.preventDefault()}),onFocus:S(t.onFocus,()=>f.onItemFocus(p)),onKeyDown:S(t.onKeyDown,u=>{if(u.key==="Tab"&&u.shiftKey){f.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const x=ps(u,f.orientation,f.dir);if(x!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||u.shiftKey)return;u.preventDefault();let h=n().filter(v=>v.focusable).map(v=>v.ref.current);if(x==="last")h.reverse();else if(x==="prev"||x==="next"){x==="prev"&&h.reverse();const v=h.indexOf(u.currentTarget);h=f.loop?fs(h,v+1):h.slice(v+1)}setTimeout(()=>_e(h))}})})})});Ee.displayName=De;var ds={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function us(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function ps(t,s,a){const o=us(t.key,a);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return ds[o]}function _e(t,s=!1){const a=document.activeElement;for(const o of t)if(o===a||(o.focus({preventScroll:s}),document.activeElement!==a))return}function fs(t,s){return t.map((a,o)=>t[(s+o)%t.length])}var ms=Se,gs=Ee,te="Tabs",[xs,ta]=M(te,[Ae]),Te=Ae(),[hs,se]=xs(te),Ie=i.forwardRef((t,s)=>{const{__scopeTabs:a,value:o,onValueChange:r,defaultValue:l,orientation:d="horizontal",dir:m,activationMode:p="automatic",...f}=t,g=be(m),[n,c]=Q({prop:o,onChange:r,defaultProp:l});return e.jsx(hs,{scope:a,baseId:ve(),value:n,onValueChange:c,orientation:d,dir:g,activationMode:p,children:e.jsx(k.div,{dir:g,"data-orientation":d,...f,ref:s})})});Ie.displayName=te;var Pe="TabsList",ke=i.forwardRef((t,s)=>{const{__scopeTabs:a,loop:o=!0,...r}=t,l=se(Pe,a),d=Te(a);return e.jsx(ms,{asChild:!0,...d,orientation:l.orientation,dir:l.dir,loop:o,children:e.jsx(k.div,{role:"tablist","aria-orientation":l.orientation,...r,ref:s})})});ke.displayName=Pe;var Fe="TabsTrigger",Oe=i.forwardRef((t,s)=>{const{__scopeTabs:a,value:o,disabled:r=!1,...l}=t,d=se(Fe,a),m=Te(a),p=$e(d.baseId,o),f=Le(d.baseId,o),g=o===d.value;return e.jsx(gs,{asChild:!0,...m,focusable:!r,active:g,children:e.jsx(k.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":f,"data-state":g?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:p,...l,ref:s,onMouseDown:S(t.onMouseDown,n=>{!r&&n.button===0&&n.ctrlKey===!1?d.onValueChange(o):n.preventDefault()}),onKeyDown:S(t.onKeyDown,n=>{[" ","Enter"].includes(n.key)&&d.onValueChange(o)}),onFocus:S(t.onFocus,()=>{const n=d.activationMode!=="manual";!g&&!r&&n&&d.onValueChange(o)})})})});Oe.displayName=Fe;var Me="TabsContent",Ve=i.forwardRef((t,s)=>{const{__scopeTabs:a,value:o,forceMount:r,children:l,...d}=t,m=se(Me,a),p=$e(m.baseId,o),f=Le(m.baseId,o),g=o===m.value,n=i.useRef(g);return i.useEffect(()=>{const c=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(c)},[]),e.jsx($t,{present:r||g,children:({present:c})=>e.jsx(k.div,{"data-state":g?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":p,hidden:!c,id:f,tabIndex:0,...d,ref:s,style:{...t.style,animationDuration:n.current?"0s":void 0},children:c&&l})})});Ve.displayName=Me;function $e(t,s){return`${t}-trigger-${s}`}function Le(t,s){return`${t}-content-${s}`}var vs=Ie,qe=ke,Ge=Oe,ze=Ve;const bs=vs,Be=i.forwardRef(({className:t,...s},a)=>e.jsx(qe,{ref:a,className:C("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...s}));Be.displayName=qe.displayName;const X=i.forwardRef(({className:t,...s},a)=>e.jsx(Ge,{ref:a,className:C("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...s}));X.displayName=Ge.displayName;const Z=i.forwardRef(({className:t,...s},a)=>e.jsx(ze,{ref:a,className:C("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Z.displayName=ze.displayName;const js=({index:t,field:s,fieldTypes:a,handleEdit:o})=>{var f,g;const[r,l]=i.useState({title:s.title,slug:s.slug,type_id:s.type_id,isRequired:s.isRequired,defaultValue:s.defaultValue||"",isReadOnly:s.isReadOnly||!1,options:s.options||{}}),d=a.find(n=>n.id===r.type_id),m=((f=d==null?void 0:d.name)==null?void 0:f.toLowerCase())||"",p=()=>{switch(m){case"image":case"file":return e.jsxs("div",{className:"text-sm text-muted-foreground p-3 bg-muted rounded-md",children:["Default value is not applicable for ",m," ","fields."]});case"boolean":return e.jsxs(B,{value:r.defaultValue===""||r.defaultValue==null?void 0:r.defaultValue,onValueChange:n=>l(c=>({...c,defaultValue:n==="none"?"":n})),children:[e.jsx(K,{children:e.jsx(H,{placeholder:"Select Default Value"})}),e.jsxs(U,{children:[e.jsx(O,{value:"none",children:"No Default"}),e.jsx(O,{value:"true",children:"True"}),e.jsx(O,{value:"false",children:"False"})]})]});case"date":return e.jsx(w,{type:"date",value:r.defaultValue||"",onChange:n=>l(c=>({...c,defaultValue:n.target.value}))});case"datetime":return e.jsx(w,{type:"datetime-local",value:r.defaultValue||"",onChange:n=>l(c=>({...c,defaultValue:n.target.value}))});case"time":return e.jsx(w,{type:"time",value:r.defaultValue||"",onChange:n=>l(c=>({...c,defaultValue:n.target.value}))});case"number":case"integer":return e.jsx(w,{type:"number",placeholder:"Enter Default Number",value:r.defaultValue||"",onChange:n=>l(c=>({...c,defaultValue:n.target.value}))});case"email":return e.jsx(w,{type:"email",placeholder:"Enter Default Email",value:r.defaultValue||"",onChange:n=>l(c=>({...c,defaultValue:n.target.value}))});case"url":return e.jsx(w,{type:"url",placeholder:"Enter Default URL",value:r.defaultValue||"",onChange:n=>l(c=>({...c,defaultValue:n.target.value}))});case"textarea":return e.jsx("textarea",{className:"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter Default Text",value:r.defaultValue||"",onChange:n=>l(c=>({...c,defaultValue:n.target.value}))});case"text":case"string":default:return e.jsx(w,{type:"text",placeholder:"Enter Default Value",value:r.defaultValue||"",onChange:n=>l(c=>({...c,defaultValue:n.target.value}))})}};return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{children:[e.jsx(fe,{children:"Edit Field"}),e.jsx(me,{children:"Edit the field properties."})]}),e.jsxs(bs,{defaultValue:"basic",className:"w-[400px]",children:[e.jsxs(Be,{className:"grid w-full grid-cols-2",children:[e.jsx(X,{value:"basic",children:"Basic"}),e.jsx(X,{value:"advanced",children:"Advanced"})]}),e.jsx(Z,{value:"basic",children:e.jsxs("div",{className:"space-y-4 mt-5",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Name"}),e.jsx(w,{placeholder:"Enter Field Name",value:r.title,onChange:n=>l(c=>({...c,title:n.target.value,slug:de(n.target.value)}))})]}),e.jsxs("div",{children:[e.jsx(A,{children:"Type"}),e.jsxs(B,{value:r.type_id!=null?String(r.type_id):void 0,onValueChange:n=>l(c=>({...c,type_id:Number(n),defaultValue:""})),children:[e.jsx(K,{children:e.jsx(H,{placeholder:"Select Type"})}),e.jsx(U,{children:a==null?void 0:a.map(n=>e.jsx(O,{value:String(n.id),children:n.name},n.id))})]})]}),m==="dropdown"&&e.jsxs("div",{children:[e.jsx(A,{children:"Dropdown Options"}),e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border rounded-lg p-2 space-y-2",children:(g=r.options)==null?void 0:g.map((n,c)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{placeholder:`Option ${c+1}`,value:n,onChange:b=>{const u=[...r.options];u[c]=b.target.value,l(x=>({...x,options:u}))}}),e.jsx(R,{type:"button",variant:"destructive",size:"sm",onClick:()=>{const b=r==null?void 0:r.options.filter((u,x)=>x!==c);l(u=>({...u,options:b}))},children:"Remove"})]},c))}),e.jsx(R,{type:"button",variant:"secondary",className:"mt-3 w-full",onClick:()=>l(n=>({...n,options:[...n.options||[],""]})),children:"+ Add Option"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:"is-required-edit",checked:r.isRequired,onCheckedChange:n=>l(c=>({...c,isRequired:n}))}),e.jsx(A,{htmlFor:"is-required-edit",children:"Is Required"})]})]})}),e.jsx(Z,{value:"advanced",children:e.jsxs("div",{className:"space-y-4 mt-5",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Default Value"}),p()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:"is-readonly-edit",checked:r.isReadOnly||!1,onCheckedChange:n=>l(c=>({...c,isReadOnly:n}))}),e.jsx(A,{htmlFor:"is-readonly-edit",children:"Read-Only for Members"})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[e.jsx(ge,{asChild:!0,children:e.jsx(R,{type:"button",variant:"outline",children:"Close"})}),e.jsx(R,{onClick:()=>o(t,r),disabled:!r.title||r.type_id===null,children:"Save"})]})]})};var Ke="AlertDialog",[ys,sa]=M(Ke,[xe]),D=xe(),He=t=>{const{__scopeAlertDialog:s,...a}=t,o=D(s);return e.jsx(Ot,{...o,...a,modal:!0})};He.displayName=Ke;var Ns="AlertDialogTrigger",Ue=i.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...o}=t,r=D(a);return e.jsx(Et,{...r,...o,ref:s})});Ue.displayName=Ns;var Cs="AlertDialogPortal",We=t=>{const{__scopeAlertDialog:s,...a}=t,o=D(s);return e.jsx(Ft,{...o,...a})};We.displayName=Cs;var ws="AlertDialogOverlay",Ye=i.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...o}=t,r=D(a);return e.jsx(_t,{...r,...o,ref:s})});Ye.displayName=ws;var I="AlertDialogContent",[Rs,As]=ys(I),Xe=i.forwardRef((t,s)=>{const{__scopeAlertDialog:a,children:o,...r}=t,l=D(a),d=i.useRef(null),m=P(s,d),p=i.useRef(null);return e.jsx(Tt,{contentName:I,titleName:Ze,docsSlug:"alert-dialog",children:e.jsx(Rs,{scope:a,cancelRef:p,children:e.jsxs(It,{role:"alertdialog",...l,...r,ref:m,onOpenAutoFocus:S(r.onOpenAutoFocus,f=>{var g;f.preventDefault(),(g=p.current)==null||g.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[e.jsx(At,{children:o}),e.jsx(Ds,{contentRef:d})]})})})});Xe.displayName=I;var Ze="AlertDialogTitle",Je=i.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...o}=t,r=D(a);return e.jsx(Pt,{...r,...o,ref:s})});Je.displayName=Ze;var Qe="AlertDialogDescription",et=i.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...o}=t,r=D(a);return e.jsx(kt,{...r,...o,ref:s})});et.displayName=Qe;var Ss="AlertDialogAction",tt=i.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...o}=t,r=D(a);return e.jsx(he,{...r,...o,ref:s})});tt.displayName=Ss;var st="AlertDialogCancel",at=i.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...o}=t,{cancelRef:r}=As(st,a),l=D(a),d=P(s,r);return e.jsx(he,{...l,...o,ref:d})});at.displayName=st;var Ds=({contentRef:t})=>{const s=`\`${I}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${I}\` by passing a \`${Qe}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${I}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{var o;document.getElementById((o=t.current)==null?void 0:o.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},Es=He,_s=Ue,Ts=We,rt=Ye,ot=Xe,nt=tt,it=at,lt=Je,ct=et;const Is=Es,Ps=_s,ks=Ts,dt=i.forwardRef(({className:t,...s},a)=>e.jsx(rt,{className:C("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));dt.displayName=rt.displayName;const ut=i.forwardRef(({className:t,...s},a)=>e.jsxs(ks,{children:[e.jsx(dt,{}),e.jsx(ot,{ref:a,className:C("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));ut.displayName=ot.displayName;const pt=({className:t,...s})=>e.jsx("div",{className:C("flex flex-col space-y-2 text-center sm:text-left",t),...s});pt.displayName="AlertDialogHeader";const ft=({className:t,...s})=>e.jsx("div",{className:C("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});ft.displayName="AlertDialogFooter";const mt=i.forwardRef(({className:t,...s},a)=>e.jsx(lt,{ref:a,className:C("text-lg font-semibold",t),...s}));mt.displayName=lt.displayName;const gt=i.forwardRef(({className:t,...s},a)=>e.jsx(ct,{ref:a,className:C("text-sm text-muted-foreground",t),...s}));gt.displayName=ct.displayName;const xt=i.forwardRef(({className:t,...s},a)=>e.jsx(nt,{ref:a,className:C(J(),t),...s}));xt.displayName=nt.displayName;const ht=i.forwardRef(({className:t,...s},a)=>e.jsx(it,{ref:a,className:C(J({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));ht.displayName=it.displayName;const Fs=()=>{const t=ce().props.current_project.uuid,[s,a]=i.useState("Untitled"),{getFieldTypes:o,fieldTypes:r}=Kt(),[l,d]=i.useState([]),[m,p]=i.useState(!1),f=(u,x)=>{d(j=>{const h=[...j];return h[u]=x,h}),V.success("Field updated")},[g,n]=i.useState({title:"",slug:"",type_id:null,isRequired:!1,options:[]});i.useEffect(()=>{r.length===0&&o()},[]);const c=()=>{if(l.some(u=>u.slug===g.slug)){alert("Field sudah ada! Harap gunakan slug yang berbeda.");return}d(u=>[...u,{...g}]),n({title:"",slug:"",type_id:null,isRequired:!1,options:[]})},b=async()=>{try{p(!0);const u={project_uuid:t,entity_name:s,fields:l};console.log(l);const x=await le.post(`/p/${t}/entities/store`,u);V.success("Entity Created Successfully"),window.location.href=`/p/${t}/entities/`}catch(u){u.response?V.error(u.response.data.message):V.error("Netework Error")}finally{p(!1)}};return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"New Entity"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(oe,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(R,{className:"border-[#4945FF] text-[#4945FF] text-xs",variant:"outline",children:"+ Add another field"})}),e.jsx(ie,{className:"sm:max-w-[450px]",children:e.jsx(Zt,{newField:g,setNewField:n,handleAddField:c,fieldTypes:r})})]}),e.jsx(R,{className:"text-xs",onClick:b,disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mr-1 size-5 animate-spin border-4 border-transparent border-slate-400 border-t-white  rounded-full",viewBox:"0 0 24 24"}),"Saving"]}):"Save"})]})]}),e.jsxs("div",{className:"shadow rounded border p-4",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Entity Name"}),e.jsx(w,{placeholder:"Entity Name",value:s,onChange:u=>a(u.target.value)})]}),e.jsxs("div",{className:"mt-5 space-y-4",children:[e.jsxs("div",{className:"flex font-bold text-sm p-4 bg-gray-100 border-b",children:[e.jsx("div",{className:"flex-1 w-[25%]",children:"Field"}),e.jsx("div",{className:"flex-1 w-[25%]",children:"Type"}),e.jsx("div",{className:"flex-1 w-[25%]",children:"Required"}),e.jsx("div",{className:"flex-1 text-center w-[25%]",children:"Actions"})]}),l.map((u,x)=>{var j,h;return e.jsxs("div",{className:"flex items-center text-sm justify-between p-4 border rounded shadow-sm",children:[e.jsx("div",{className:"flex items-center space-x-2 w-[25%]",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:(j=r==null?void 0:r.find(v=>v.id===u.type_id))==null?void 0:j.icon,alt:""}),e.jsx("span",{className:"self-center",children:St(u.title)})]})}),e.jsx("div",{className:"flex-1 w-[25%]",children:(h=r==null?void 0:r.find(v=>v.id===u.type_id))==null?void 0:h.name}),e.jsx("div",{className:"flex-1 w-[25%]",children:u.isRequired&&e.jsx("span",{className:"text-xs text-orange-400 bg-orange-100 px-3 py-1 rounded",children:"Required"})}),e.jsxs("div",{className:"flex-1 text-center  w-[25%]",children:[e.jsxs(Is,{children:[e.jsx(Ps,{children:e.jsx(R,{variant:"ghost",className:"bg-red-300 py-4 me-1 rounded-full hover:bg-red-400",size:"xs",children:e.jsx(Lt,{className:"text-red-500",size:8})})}),e.jsxs(ut,{children:[e.jsxs(pt,{children:[e.jsx(mt,{children:"Are you absolutely sure?"}),e.jsx(gt,{children:"This action cannot be undone."})]}),e.jsxs(ft,{children:[e.jsx(ht,{children:"Cancel"}),e.jsx(xt,{className:J({variant:"destructive"}),onClick:()=>d(l.filter((v,y)=>y!==x)),children:"Delete"})]})]})]}),e.jsxs(oe,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(R,{variant:"ghost",className:"bg-orange-300 py-4 rounded-full hover:bg-orange-400",size:"xs",children:e.jsx(Bt,{className:"text-orange-500",size:8})})}),e.jsx(ie,{className:"sm:max-w-[450px]",children:e.jsx(js,{index:x,field:u,fieldTypes:r,handleEdit:f})})]})]})]},x)})]})]})]})},aa=()=>{const t=ce().props.current_project.uuid;return e.jsx(qt,{children:e.jsxs("div",{className:"ps-2 pe-7",children:[e.jsxs(Ct,{href:`/p/${t}/entities`,className:"text-sm inline-flex items-center gap-2 mb-4 text-primary",children:[e.jsx(Gt,{size:10}),"back"]}),e.jsx(Fs,{})]})})};export{aa as default};
