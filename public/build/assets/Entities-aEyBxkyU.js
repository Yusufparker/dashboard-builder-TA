import{K as m,r as n,a as T,k as h,j as e,$ as b}from"./app-S1NbybTy.js";import{T as w,a as y,b as j,c,d as C,e as d}from"./table-B8RJ-R1S.js";import{D as v,a as S,E as L,b as $,c as M,d as _,e as u}from"./dropdown-menu-HaMLnO5L.js";import{D as z,a as k,b as B,c as F,d as H,e as I,f as O}from"./dialog-DxnoNPjn.js";import{I as A}from"./input-BoCdPJ-m.js";import{a as g,B as D,b as R}from"./AuthenticatedLayout-np5EyWr9.js";import{D as V}from"./DashboardLayout-DFavhX3m.js";import"./index-wSg68zUq.js";import"./index-B4IO292q.js";import"./index-DlPfhbBw.js";import"./index-B5XCxAAh.js";import"./x-ByVxXwLa.js";import"./transition-C99L9tC2.js";const K=()=>{const t=m().props.current_project.entities,i=m().props.current_project.uuid,[f,l]=n.useState(!1),[a,x]=n.useState(null),[p,o]=n.useState(""),r=p==="DELETE",N=n.useCallback(async()=>{if(!(!a||!r))try{await T.delete(`/p/${i}/entities/${a.uuid}`),h.success("Entity deleted"),l(!1),o(""),x(null),window.location.reload()}catch(s){console.error(s),h.error("Failed to delete entity")}},[i,a,r]);return e.jsxs(e.Fragment,{children:[e.jsxs(w,{className:"text-sm w-full border border-gray-200 rounded-lg",children:[e.jsx(y,{className:"bg-gray-100",children:e.jsxs(j,{children:[e.jsx(c,{className:"w-[30%] font-semibold",children:"Name"}),e.jsx(c,{className:"font-semibold",children:"Created At"}),e.jsx(c,{className:"text-right"})]})}),e.jsx(C,{children:t==null?void 0:t.map((s,E)=>e.jsxs(j,{className:"hover:bg-gray-50",children:[e.jsx(d,{className:"py-2 px-4",children:g(s.name)}),e.jsx(d,{className:"py-2 px-4",children:new Date(s.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),e.jsx(d,{className:"text-right",children:e.jsxs(v,{children:[e.jsx(S,{children:e.jsx(L,{size:14})}),e.jsxs($,{align:"end",children:[e.jsx(M,{className:"text-xs",children:"Options"}),e.jsx(_,{}),e.jsx(u,{className:"text-xs",children:e.jsx(b,{href:`/p/${i}/entities/setting/${s.uuid}`,children:"Setting"})}),e.jsx(u,{className:"text-xs text-red-600",onSelect:()=>{x(s),o(""),l(!0)},children:"Delete"})]})]})})]},E))})]}),e.jsx(z,{open:f,onOpenChange:l,children:e.jsxs(k,{className:"sm:max-w-sm",children:[e.jsxs(B,{children:[e.jsx(F,{children:"Confirm Deletion"}),e.jsxs(H,{children:["To delete"," ",e.jsx("strong",{children:g((a==null?void 0:a.name)||"")}),", type ",e.jsx("code",{children:"DELETE"})," below. This cannot be undone."]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(A,{placeholder:"DELETE",value:p,onChange:s=>o(s.target.value.trim()),className:"text-sm"})}),e.jsxs(I,{className:"mt-4 flex justify-end gap-2",children:[e.jsx(O,{asChild:!0,children:e.jsx(D,{size:"sm",variant:"secondary",children:"Cancel"})}),e.jsx(D,{size:"sm",variant:"destructive",disabled:!r,onClick:N,children:r?"Delete":"Type DELETE"})]})]})})]})},te=()=>{const t=m().props.current_project.uuid;return e.jsx(V,{children:e.jsxs("div",{className:"ps-2 pe-7",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"font-bold text-2xl",children:"Entities"}),e.jsx(b,{href:`/p/${t}/entities/new`,className:R({size:"sm"}),children:"+ Add New"})]}),e.jsx("div",{className:"mt-10",children:e.jsx(K,{})})]})})};export{te as default};
