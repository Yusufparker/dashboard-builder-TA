import{r as o,j as t,K as A,a as W,k as N,$ as H}from"./app-S1NbybTy.js";import{u as T}from"./index.esm-DjFb8LCz.js";import{c as M,g as z,u as q,e as S,B as U}from"./AuthenticatedLayout-np5EyWr9.js";import{c as X,u as G,a as P,P as Z}from"./index-wSg68zUq.js";import{u as J,M as Q}from"./index-czfk9bmO.js";import{u as Y,C as ee}from"./index-B5XCxAAh.js";import"./index-DlPfhbBw.js";import{I as R}from"./input-BoCdPJ-m.js";import{L as I}from"./label-EYA8d30M.js";import{D as te}from"./DashboardLayout-DFavhX3m.js";import"./transition-C99L9tC2.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],re=M("Clipboard",se);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],ae=M("RefreshCcw",ne);var L=o.forwardRef((e,r)=>{const{children:s,...n}=e,i=o.Children.toArray(s),a=i.find(ie);if(a){const c=a.props.children,l=i.map(h=>h===a?o.Children.count(c)>1?o.Children.only(null):o.isValidElement(c)?c.props.children:null:h);return t.jsx(_,{...n,ref:r,children:o.isValidElement(c)?o.cloneElement(c,void 0,l):null})}return t.jsx(_,{...n,ref:r,children:s})});L.displayName="Slot";var _=o.forwardRef((e,r)=>{const{children:s,...n}=e;if(o.isValidElement(s)){const i=le(s),a=ce(n,s.props);return s.type!==o.Fragment&&(a.ref=r?z(r,i):i),o.cloneElement(s,a)}return o.Children.count(s)>1?o.Children.only(null):null});_.displayName="SlotClone";var oe=({children:e})=>t.jsx(t.Fragment,{children:e});function ie(e){return o.isValidElement(e)&&e.type===oe}function ce(e,r){const s={...r};for(const n in r){const i=e[n],a=r[n];/^on[A-Z]/.test(n)?i&&a?s[n]=(...l)=>{a(...l),i(...l)}:i&&(s[n]=i):n==="style"?s[n]={...i,...a}:n==="className"&&(s[n]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function le(e){var n,i;let r=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var de=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],D=de.reduce((e,r)=>{const s=o.forwardRef((n,i)=>{const{asChild:a,...c}=n,l=a?L:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(l,{...c,ref:i})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),E="Checkbox",[pe,Se]=X(E),[ue,fe]=pe(E),O=o.forwardRef((e,r)=>{const{__scopeCheckbox:s,name:n,checked:i,defaultChecked:a,required:c,disabled:l,value:h="on",onCheckedChange:k,form:m,...y}=e,[f,C]=o.useState(null),j=q(r,p=>C(p)),v=o.useRef(!1),d=f?m||!!f.closest("form"):!0,[u=!1,g]=G({prop:i,defaultProp:a,onChange:k}),w=o.useRef(u);return o.useEffect(()=>{const p=f==null?void 0:f.form;if(p){const x=()=>g(w.current);return p.addEventListener("reset",x),()=>p.removeEventListener("reset",x)}},[f,g]),t.jsxs(ue,{scope:s,state:u,disabled:l,children:[t.jsx(D.button,{type:"button",role:"checkbox","aria-checked":b(u)?"mixed":u,"aria-required":c,"data-state":B(u),"data-disabled":l?"":void 0,disabled:l,value:h,...y,ref:j,onKeyDown:P(e.onKeyDown,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:P(e.onClick,p=>{g(x=>b(x)?!0:!x),d&&(v.current=p.isPropagationStopped(),v.current||p.stopPropagation())})}),d&&t.jsx(he,{control:f,bubbles:!v.current,name:n,value:h,checked:u,required:c,disabled:l,form:m,style:{transform:"translateX(-100%)"},defaultChecked:b(a)?!1:a})]})});O.displayName=E;var V="CheckboxIndicator",$=o.forwardRef((e,r)=>{const{__scopeCheckbox:s,forceMount:n,...i}=e,a=fe(V,s);return t.jsx(Z,{present:n||b(a.state)||a.state===!0,children:t.jsx(D.span,{"data-state":B(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...e.style}})})});$.displayName=V;var he=e=>{const{control:r,checked:s,bubbles:n=!0,defaultChecked:i,...a}=e,c=o.useRef(null),l=J(s),h=Y(r);o.useEffect(()=>{const m=c.current,y=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(y,"checked").set;if(l!==s&&C){const j=new Event("click",{bubbles:n});m.indeterminate=b(s),C.call(m,b(s)?!1:s),m.dispatchEvent(j)}},[l,s,n]);const k=o.useRef(b(s)?!1:s);return t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??k.current,...a,tabIndex:-1,ref:c,style:{...e.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return e==="indeterminate"}function B(e){return b(e)?"indeterminate":e?"checked":"unchecked"}var F=O,me=$;const K=o.forwardRef(({className:e,...r},s)=>t.jsx(F,{ref:s,className:S("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:t.jsx(me,{className:S("flex items-center justify-center text-current"),children:t.jsx(ee,{className:"h-4 w-4"})})}));K.displayName=F.displayName;const xe=({setting:e})=>{const r=A().props.current_project.uuid,{register:s,handleSubmit:n,watch:i,setValue:a}=T({defaultValues:{is_api_enabled:!!e.is_api_enabled,endpoint:e.endpoint,api_key:e.api_key}}),c=i("is_api_enabled"),l="http://localhost:8000/api/",[h,k]=o.useState(!1),[m,y]=o.useState(!1),f=()=>{const d=`${l}${i("endpoint")}`;navigator.clipboard.writeText(d),k(!0),setTimeout(()=>k(!1),2e3)},C=()=>{const d=(g=32)=>{const w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let p="";for(let x=0;x<g;x++)p+=w.charAt(Math.floor(Math.random()*w.length));return p};return((g="ak_")=>g+d(28))("ak_")},j=async d=>{await v(d)},v=async d=>{try{y(!0);const u=await W.post(`/p/${r}/entities/setting/store/${e.id}`,{is_api_enabled:d.is_api_enabled,endpoint:d.endpoint,api_key:d.api_key||""});u.data.status=="success"?(N.success(u.data.message),window.location.reload()):N.error(u.data.message),y(!1)}catch{N.error("Failed"),y(!1)}};return t.jsxs("form",{onSubmit:n(j),className:"shadow rounded border p-4 space-y-4",children:[t.jsxs("div",{className:"items-top flex space-x-2",children:[t.jsx(K,{id:"is_api_enabled",checked:c,onCheckedChange:d=>a("is_api_enabled",!!d)}),t.jsxs("div",{className:"grid gap-1.5 leading-none",children:[t.jsx("label",{htmlFor:"is_api_enabled",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Enable API"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow API access to share data with other systems"})]})]}),t.jsxs("div",{children:[t.jsx(I,{children:"Endpoint"}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx("span",{className:"text-gray-500",children:l}),t.jsx(R,{...s("endpoint"),disabled:!c,className:"disabled:bg-gray-100 flex-1 text-sm"}),t.jsx("button",{type:"button",onClick:f,className:"p-1 text-gray-500 hover:text-gray-700",children:t.jsx(re,{className:"w-5 h-5"})}),h&&t.jsx("span",{className:"text-green-500 text-xs",children:"Copied!"})]})]}),c&&t.jsxs("div",{children:[t.jsx(I,{children:"API Key"}),t.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[t.jsx(R,{...s("api_key"),disabled:!0,readOnly:!0,className:"bg-gray-100 flex-1 text-sm cursor-not-allowed",placeholder:"Click generate to create API key"}),t.jsxs("button",{type:"button",onClick:()=>{const d=C();a("api_key",d)},className:"flex items-center space-x-1 p-1 text-gray-500 hover:text-gray-700",children:[t.jsx(ae,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:"Generate"})]})]})]}),t.jsx(U,{type:"submit",size:"sm",disabled:m,children:"Save Settings"})]})},Pe=({setting:e})=>{const r=A().props.current_project.uuid;return t.jsx(te,{children:t.jsxs("div",{className:"ps-2 pe-7",children:[t.jsxs("div",{className:"mb-5",children:[t.jsxs(H,{href:`/p/${r}/entities`,className:"text-sm inline-flex items-center gap-2 mb-4 text-primary",children:[t.jsx(Q,{size:10}),"back"]}),t.jsx("h1",{className:"text-2xl font-bold",children:"Entity Setting"})]}),t.jsx(xe,{setting:e})]})})};export{Pe as default};
